function Line(e){this.p1={x:0,y:yCenter},this.p2={x:.333*size,y:yCenter},this.p3={x:.666*size,y:yCenter},this.offset=e}function init(){container=document.querySelector(".js-hackenproof-top-section"),canvas=document.querySelector(".js-polylines-canvas"),ctx=canvas.getContext("2d"),ctx.lineWidth=1,lines=[],fps=30,background=new Image,background.src=canvas.dataset.bg,background.onload=function(){ctx.drawImage(background,0,0)},rebuildCanvas(),drawCanvas()}function clearCanvas(){ctx.fillRect(0,0,width,height),ctx.drawImage(background,0,0)}function transformCanvas(){ctx.translate(0,0),ctx.translate(0,-yCenter),ctx.translate((width-size)/2,0)}function rebuildCanvas(){width=window.innerWidth,height=container.clientHeight,xCenter=width/2,yCenter=height/2,size=.5*Math.min(width,height),lines.length=0,tick=0,canvas.width=width,canvas.height=height;for(var e=0;e<20;e++)lines.push(new Line(8*e))}function drawCanvas(){setTimeout(function(){var e=lines.length;for(ctx.save(),clearCanvas(),transformCanvas();e--;)lines[e].animationStep(),lines[e].drawAnimationStep();requestAnimationFrame(drawCanvas),ctx.restore(),tick++},1e3/fps)}var canvas,ctx,width,height,xCenter,yCenter,size,lines,tick,fps,background;Line.prototype.animationStep=function(){var e=(this.offset+tick)/60;this.p1.x+=Math.cos(e)*(size/1e3),this.p2.x+=Math.sin(e)*(size/1e3),this.p2.y=yCenter+Math.cos(e)*size/1,this.p3.x+=Math.cos(e)*(size/1e3),this.p3.y=yCenter+Math.sin(e)*size/1},Line.prototype.drawAnimationStep=function(){ctx.beginPath(),ctx.moveTo(this.p1.x,this.p1.y),ctx.bezierCurveTo(this.p2.x,this.p2.y,this.p3.x,this.p3.y,-width/2,height);var e=.55+.45*Math.sin((this.offset+tick)/20);ctx.strokeStyle="rgba(131, 139, 198, "+e+")",ctx.stroke()},window.addEventListener("resize",rebuildCanvas),init(),function(){$.fn.scrollMagicHackAnim=function(){var e,t,n,i,a,r;return e=new ScrollMagic.Controller,t=(new TimelineMax).fromTo(".js-hackenproof-main-content",.5,{opacity:"0",transform:"translate(0, 50px)"},{opacity:"1",transform:"translate(0, 0)",delay:.1}).fromTo(".js-hackenproof-top-img",.5,{opacity:"0",transform:"translate(0, 100px)"},{opacity:"1",transform:"translate(0, 0)"}),new ScrollMagic.Scene({triggerElement:".hackenproof",triggerHook:0,reverse:!1}).setTween(t).addTo(e),i=(new TimelineMax).fromTo(".polyline-02",.5,{opacity:0},{opacity:1}),new ScrollMagic.Scene({triggerElement:".js-bg-animation1",triggerHook:.7,reverse:!1}).setTween(i).addTo(e),n=(new TimelineMax).fromTo(".polyline-02",.5,{top:"-1%",right:0},{top:"-25%",right:"-5%"}),new ScrollMagic.Scene({triggerElement:".js-bg-animation1",triggerHook:.7,duration:1.25*$(".js-bg-animation1").height()}).setTween(n).addTo(e),a=(new TimelineMax).fromTo(".polyline-03",.5,{bottom:"-20%"},{bottom:"-2%"}),new ScrollMagic.Scene({triggerElement:".js-bg-animation2",triggerHook:.1,duration:2*$(".js-bg-animation2").height()}).setTween(a).addTo(e),r=(new TimelineMax).fromTo(".js-img-list-image-last",.5,{opacity:0},{opacity:1}),new ScrollMagic.Scene({triggerElement:".js-bg-animation2",triggerHook:.85,reverse:!1}).setTween(r).addTo(e),$(".js-animated-section").each(function(t){var n,i;return i=".js-animated-"+t,n=(new TimelineMax).fromTo(i+" .section-heading",.5,{opacity:0,transform:"translate(-50px, 0)"},{opacity:1,transform:"translate(0, 0)"}).fromTo(i+" .js-animated-image",.5,{opacity:0},{opacity:1}),new ScrollMagic.Scene({triggerElement:".js-animated-"+t,triggerHook:.7,reverse:!1}).setTween(n).addTo(e)}),$(".js-animated-image-row").each(function(t){var n,i,a;return n=".js-animated-image-row-"+t,i=(new TimelineMax).fromTo(n+" .js-from-left",.5,{opacity:0,transform:"translate(-50px, 0)"},{opacity:1,transform:"translate(0, 0)"}),a=(new TimelineMax).fromTo(n+" .js-from-right",.75,{opacity:0,transform:"translate(50px, 0)"},{opacity:1,transform:"translate(0, 0)"}),new ScrollMagic.Scene({triggerElement:n,triggerHook:.85,reverse:!1}).setTween(i).addTo(e),new ScrollMagic.Scene({triggerElement:n,triggerHook:.85,reverse:!1}).setTween(a).addTo(e)})},$(document).ready(function(){if(windowWidth>960)return $.fn.scrollMagicHackAnim()})}.call(this);